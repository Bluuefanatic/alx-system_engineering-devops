#!/usr/bin/env bash
# Script: apache_log_grouping.sh
# Description: Group visitors by IP and HTTP status code, and display data in descending order.

# Apache log file path
log_file="apache-access.log"

# Check if the log file exists
if [ -e "$log_file" ]; then

    # Use awk to group and count occurrences, then sort in descending order
    awk '{count[$1 " " $9]++} END {for (key in count) print count[key], key}' "$log_file" | sort -nr

else
    echo "Error: $log_file does not exist."
fi
